# ファイルシステムツール

Gemini CLI はローカルのファイル/ディレクトリに対する操作を行う多彩なツールを提供します。すべてルートディレクトリ（通常は CLI 起動先）内で動作し、パスは絶対指定か相対解決されます。

## 主なツール

1. **`list_directory`（ReadFolder）**
   - 指定ディレクトリの直下ファイル/フォルダ一覧を取得（`ignore` や `.gitignore` を尊重可能）。
   - ディレクトリ優先、アルファベット順にソートされた名前を返す。
   - 確認不要。

2. **`read_file`（ReadFile）**
   - テキスト／画像／PDF を読み取り。`offset`/`limit` で行範囲を指定でき、長すぎる場合は切り詰めを通知。
   - バイナリは識別して表示不可と返す。
   - 画像や PDF は MIME タイプ付きの base64 を返す。
   - 確認不要。

3. **`write_file`（WriteFile）**
   - ファイルを上書きまたは新規作成（親ディレクトリも作成）。CLI は差分・確認プロンプトを表示し、承認後に書き込み。

4. **`glob`（FindFiles）**
   - glob パターン（`src/**/*.ts` など）に一致するファイルを修正日時順で列挙。`respect_git_ignore` や `case_sensitive` で動作を調整。

5. **`search_file_content`（SearchText）**
   - 正規表現と glob でファイル内容を検索し、ファイルパス＋行番号付きでマッチ行を報告。Git リポジトリでは `git grep` を優先。

6. **`replace`（Edit）**
   - 指定テキストを `old_string` → `new_string` で置換。`expected_replacements` やマルチステージの修正補正で正確な変更を狙う。`old_string` が空なら新規ファイル作成。
   - 絶対パスで、ルート外への変更は拒否。

## 安全性

- ファイル書き換え前に差分と確認が表示される。
- `replace` は `old_string` に文脈を含めること、複数一致する場合の補正メカニズムを備える。

上記ツールを組み合わせることで、ファイルの読み書きや検索を細かく制御し、モデルの応答を現実のコードベースへ反映できます。
