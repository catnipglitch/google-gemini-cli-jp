# パッケージの概要

このモノレポには、`@google/gemini-cli` と `@google/gemini-cli-core` の2つの主要なパッケージが含まれています。

## `@google/gemini-cli`

これは Gemini CLI のメインパッケージです。ユーザーインターフェース、コマンド解析、およびその他すべてのユーザー向け機能を担当します。

このパッケージが公開されると、単一の実行可能ファイルにバンドルされます。このバンドルには、`@google/gemini-cli-core` を含む、パッケージのすべての依存関係が含まれます。これは、ユーザーが `npm install -g @google/gemini-cli` でパッケージをインストールするか、`npx @google/gemini-cli` で直接実行するかにかかわらず、この単一の自己完結型実行可能ファイルを使用していることを意味します。

## `@google/gemini-cli-core`

このパッケージには、Gemini API と対話するためのコアロジックが含まれています。API リクエストの作成、認証の処理、ローカルキャッシュの管理を担当します。

このパッケージはバンドルされません。公開されると、独自の依存関係を持つ標準の Node.js パッケージとして公開されます。これにより、必要に応じて他のプロジェクトでスタンドアロンパッケージとして使用できます。`dist` フォルダ内のすべてのトランスパイルされた js コードがパッケージに含まれています。

## NPM ワークスペース

このプロジェクトでは、このモノレポ内のパッケージを管理するために [NPM Workspaces](https://docs.npmjs.com/cli/v10/using-npm/workspaces) を使用しています。これにより、プロジェクトのルートから複数のパッケージ間で依存関係を管理し、スクリプトを実行できるため、開発が簡素化されます。

### 仕組み

ルートの `package.json` ファイルは、このプロジェクトのワークスペースを定義します。

```json
{
  "workspaces": ["packages/*"]
}
```

これは、`packages` ディレクトリ内のすべてのフォルダが、ワークスペースの一部として管理されるべき個別のパッケージであることを NPM に伝えます。

### ワークスペースの利点

- **簡素化された依存関係管理**: プロジェクトのルートから `npm install` を実行すると、ワークスペース内のすべてのパッケージのすべての依存関係がインストールされ、互いにリンクされます。これにより、各パッケージのディレクトリで `npm install` を実行する必要がなくなります。
- **自動リンク**: ワークスペース内のパッケージは互いに依存できます。`npm install` を実行すると、NPM はパッケージ間にシンボリックリンクを自動的に作成します。これにより、あるパッケージに変更を加えると、それに依存する他のパッケージで変更がすぐに利用可能になります。
- **簡素化されたスクリプト実行**: `--workspace` フラグを使用して、プロジェクトのルートから任意のパッケージでスクリプトを実行できます。たとえば、`cli` パッケージで `build` スクリプトを実行するには、`npm run build --workspace @google/gemini-cli` を実行します。